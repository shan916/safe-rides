<div class="container">

    <div class="row margin-top-20 margin-bottom-20">
        <div class="col-md-12" align="center">
            <h3>
                    {{ctrl.driver.firstname}}&nbsp;{{ctrl.driver.lastname}}
            </h3>
        </div>
    </div>

  <!-- No Ride View -->
  <div ng-show="ctrl.isRideAssigned === false">
    <div class="alert alert-info" role="alert"><!-- alert-dismissible-->
        <strong>No Incoming Ride Requests:</strong> You currently do not have any ride requests assigned to you.
    </div>
    <div class="col-md-12 text-center">
        <div class="row text-center">
            <button class="btn btn-default btn-info" type="button"
                    ng-click="ctrl.refresh()">
              Refresh
            </button>
        </div>
        <div class="row text-center">
            <button class="btn btn-default btn-danger" type="button" ng-click="ctrl.endNight()" ng-show="!ctrl.endNightPressed">
              End Night
          </button>
      </div>
      <div class="col-md-3">

      </div>
        <div class="row text-center col-md-6">
            <div class="col-md-3"></div>
            <div class="col-md-6" ng-show="ctrl.endNightPressed">
                <form name="odoEndNightForm" class="form-vertical">
                  <label for="odoEndNightForm">Enter ODO to complete ASI Safe Rides Night: </label>
                  <input id="odoEndNight" name="odoEndNight" type="number" class="form-control" required
                  placeholder="ex: 120405" ng-model="ctrl.endNightOdo"
                  ng-maxlength="6" ng-minlength="3" ng-min="100">
                  <div ng-messages="odoEndNightForm.odoStartRide.$dirty && odoEndNightForm.odoStartRide.$error">
                      <div class="input-error" ng-message="required">* required to complete Safe Rides Night</div>
                  </div>
                </form>
                <button class="btn btn-default btn-success" type="button" ng-click="ctrl.submitEndNightOdo()" ng-disabled="odoEndNightForm.$invalid">
                  Submit
                </button>
                <button class="btn btn-default btn-danger" type="button" ng-click="ctrl.cancelEndNight()">
                  Cancel
                </button>
            </div>
            <div class="col-md-3"></div>
        </div>
        <div class="col-md-3"></div>
    </div>
    <div class="row text-center">
        <strong>Call ASI: (916) 278-8294</strong>
    </div>

      <!--div class="col-md-12 text-center"-->
  </div><!-- end No Ride View -->

    <!-- New Ride Available -->
    <div class="panel panel-success" ng-show="ctrl.assignedRide.status === 'ASSIGNED'">
      <div class="panel-heading text-center">
          <h3 class="panel-title"><img src="images/car_icon_18px.png">&nbsp;&nbsp;<strong>New Ride Assigned</strong>&nbsp;&nbsp;<img src="images/car_icon_18px.png"></h3>
      </div>
      <div class="panel-body">
            <div class="row margin-top-20">
              <div class="col-md-3"></div>
            <div class="col-md-6">

                  <form name="odoStartRideForm" class="form-vertical">
                    <label for="odoStartRide">Enter ODO in miles to View Ride: </label>
                    <input id="odoStartRide" name="odoStartRide" type="number" class="form-control" required
                    placeholder="ex: 120405" ng-model="ctrl.startOdo"
                    ng-maxlength="6" ng-minlength="3" ng-min="100">
                    <div ng-messages="odoStartRideForm.odoStartRide.$dirty && odoStartRideForm.odoStartRide.$error">
                        <div class="input-error" ng-message="required">* required to begin newly assigned ride</div>
                    </div>
                  </form>
            </div>
            <div class="col-md-3">
            </div>
        </div>
        <div class="row"  style="padding-top:5px;">
          <div class="col-md-3">
          </div>
          <div class="col-md-6">
            <button class="btn btn-success btn-block" ng-disabled="odoStartRideForm.$invalid"
                    ng-click="ctrl.viewRide()">View Ride</button>
          </div>
          <div class="col-md-3">
          </div>
        </div>

    </div><!-- end panel body -->
  </div><!-- end New Ride Assigned Request -->


    <!-- Currrent Ride Request-->
    <div class="panel panel-primary" ng-show="ctrl.assignedRide.status === 'PICKINGUP' || ctrl.assignedRide.status === 'DROPPINGOFF' || ctrl.assignedRide.status === 'ATPICKUPLOCATION'">
        <div class="panel-heading">
            <h3 class="panel-title">Current Ride Request</h3>
        </div>
        <div class="panel-body">
          <div class="row" ><!-- ng-repeat="ride in ctrl.rideRequests" -->
            <div class="col-md-4"><!-- rider info -->
              <!--h4>Rider</h4-->
              <dl class="dl-horizontal"><!-- class="dl-horizontal"-->
                <dt>Name:</dt>
                <dd>{{ctrl.assignedRide.requestorFirstName}}&nbsp;{{ctrl.assignedRide.requestorLastName}}</dd>
                <dt>One Card:</dt>
                <dd>{{ctrl.assignedRide.oneCardId}}</dd>
                <dt>Passengers:</dt>
                <dd>{{ctrl.assignedRide.numPassengers}}</dd>
                <dt ng-if="ctrl.assignedRide.messageToDriver">Message To Driver:</dt>
                <dd ng-if="ctrl.assignedRide.messageToDriver">{{ctrl.assignedRide.messageToDriver}}</dd>
              </dl>
            </div>
            <div class="col-md-4"><!--pickup -->
              <!--h4>Pickup Address</h4-->
              <dl class="dl-horizontal"><!-- class="dl-horizontal"-->
                <dt>Pickup Address:</dt>
                <dd>{{ctrl.assignedRide.pickupLine1}}</dd>
                <dd ng-if="ride.pickupLine2">{{ctrl.assignedRide.pickupLine2}}</dd>
                <dd>{{ctrl.assignedRide.pickupCity}}, CA</dd>
                <dd><a class="btn btn-info btn-block"
                  ng-href="{{ctrl.pickupAddress}}" target="_blank">Directions</a></dd>
              </dl>

                  <button class="btn btn-default btn-block btn-success" ng-click="ctrl.notifyRider()"
                  ng-show="ctrl.assignedRide.status === 'PICKINGUP' || ctrl.assignedRide.status === 'ATPICKUPLOCATION'">
                      Arrived / Notify Rider
                  </button>

            </div>
            <div class="col-md-4"><!-- dropoff -->
              <!--h4>Drop-off Address</h4-->
              <dl class="dl-horizontal" ng-hide="ctrl.pickedUpButtonPressed">
                <dt>Drop-off Address:</dt>
                <dd>Please signify you have picked up the rider to reveal Drop-off Address</dd>
                <dd><button class="btn btn-warning btn-block" ng-click="ctrl.pickedUp()">Picked Up Rider</button></dd>
              </dl>
              <dl class="dl-horizontal" ng-show="ctrl.pickedUpButtonPressed">
                <dt>Drop-off Address:</dt>
                <dd>{{ctrl.assignedRide.dropoffLine1}}</dd>
                <dd ng-if="ride.dropoffLine2">{{ctrl.assignedRide.dropoffLine2}}</dd>
                <dd>{{ctrl.assignedRide.dropoffCity}}, CA</dd>
                <dd><a class="btn btn-info btn-block" ng-href="{{ctrl.dropoffAddress}}" target="_blank">Directions</a></dd>
              </dl>
            </div><!-- end dropoff-->
          </div><!-- end row -->
          <div class="row margin-top-20">
            <div class="col-md-3"></div>
            <div class="col-md-6">

                <div class="col-md-6 row margin-top-20">
                    <button class="btn btn-default btn-block btn-warning">
                        Report Issue / Contact SafeRides
                    </button>
                </div>
                <div class="col-md-6 row margin-top-20" ng-show="ctrl.pickedUpButtonPressed">
                    <form name="odoEndRideForm" class="form-vertical">
                      <label for="odoEndRideForm">Enter ODO in miles to End Ride: </label>
                      <input id="odoEndRide" name="odoEndRide" type="number" class="form-control" required
                      placeholder="ex: 120455" ng-model="ctrl.endOdo"
                      ng-maxlength="6" ng-minlength="3" ng-min="100">
                      <div ng-messages="odoEndRideForm.odoEndRide.$dirty && odoEndRideForm.odoEndRide.$error">
                          <div class="input-error" ng-message="required">* required to end assigned ride</div>
                      </div>
                    </form>

                    <button class="btn btn-default btn-block btn-danger"
                            ng-disabled="odoEndRideForm.$invalid" ng-click="ctrl.endRide()">
                            End Ride / Drop-Off
                    </button>
                </div>

            </div>
            <div class="col-md-3"></div>
        </div><!--end div row-->
      </div><!-- end panel body-->
    </div><!-- end Current Ride Request panel-->

</div><!-- end driverdashboard.html -->
